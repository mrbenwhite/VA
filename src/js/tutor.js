var reports = "[{\"Student\":1,\"Cycle\":5,\"Subject\":\"Biology\",\"Grade\":\"B\"},{\"Student\":1,\"Cycle\":5,\"Subject\":\"Chemistry\",\"Grade\":\"A*\"},{\"Student\":1,\"Cycle\":5,\"Subject\":\"Drama\",\"Grade\":8},{\"Student\":1,\"Cycle\":5,\"Subject\":\"English\",\"Grade\":8},{\"Student\":1,\"Cycle\":5,\"Subject\":\"Geography\",\"Grade\":6},{\"Student\":1,\"Cycle\":5,\"Subject\":\"Maths\",\"Grade\":7},{\"Student\":1,\"Cycle\":5,\"Subject\":\"PE\",\"Grade\":7},{\"Student\":1,\"Cycle\":5,\"Subject\":\"Photography\",\"Grade\":7},{\"Student\":1,\"Cycle\":5,\"Subject\":\"Physics\",\"Grade\":\"A*\"},{\"Student\":1,\"Cycle\":5,\"Subject\":\"Spanish\",\"Grade\":\"B\"},{\"Student\":2,\"Cycle\":5,\"Subject\":\"Biology\",\"Grade\":\"A\"},{\"Student\":2,\"Cycle\":5,\"Subject\":\"Chemistry\",\"Grade\":\"A*\"},{\"Student\":2,\"Cycle\":5,\"Subject\":\"Computer Science\",\"Grade\":6},{\"Student\":2,\"Cycle\":5,\"Subject\":\"DT\",\"Grade\":\"A\"},{\"Student\":2,\"Cycle\":5,\"Subject\":\"English\",\"Grade\":7},{\"Student\":2,\"Cycle\":5,\"Subject\":\"History\",\"Grade\":\"B\"},{\"Student\":2,\"Cycle\":5,\"Subject\":\"Mandarin\",\"Grade\":\"A*\"},{\"Student\":2,\"Cycle\":5,\"Subject\":\"Maths\",\"Grade\":8},{\"Student\":2,\"Cycle\":5,\"Subject\":\"Physics\",\"Grade\":\"A*\"},{\"Student\":3,\"Cycle\":5,\"Subject\":\"Biology\",\"Grade\":\"B\"},{\"Student\":3,\"Cycle\":5,\"Subject\":\"Chemistry\",\"Grade\":\"A\"},{\"Student\":3,\"Cycle\":5,\"Subject\":\"Drama\",\"Grade\":7},{\"Student\":3,\"Cycle\":5,\"Subject\":\"English\",\"Grade\":\"\"},{\"Student\":3,\"Cycle\":5,\"Subject\":\"History\",\"Grade\":\"A\"},{\"Student\":3,\"Cycle\":5,\"Subject\":\"Mandarin\",\"Grade\":7},{\"Student\":3,\"Cycle\":5,\"Subject\":\"Maths\",\"Grade\":7},{\"Student\":3,\"Cycle\":5,\"Subject\":\"PE\",\"Grade\":7},{\"Student\":3,\"Cycle\":5,\"Subject\":\"Physics\",\"Grade\":\"A\"},{\"Student\":4,\"Cycle\":5,\"Subject\":\"Biology\",\"Grade\":\"A*\"},{\"Student\":4,\"Cycle\":5,\"Subject\":\"Chemistry\",\"Grade\":\"A*\"},{\"Student\":4,\"Cycle\":5,\"Subject\":\"Drama\",\"Grade\":7},{\"Student\":4,\"Cycle\":5,\"Subject\":\"English\",\"Grade\":8},{\"Student\":4,\"Cycle\":5,\"Subject\":\"Geography\",\"Grade\":7},{\"Student\":4,\"Cycle\":5,\"Subject\":\"Latin\",\"Grade\":8},{\"Student\":4,\"Cycle\":5,\"Subject\":\"Maths\",\"Grade\":7},{\"Student\":4,\"Cycle\":5,\"Subject\":\"PE\",\"Grade\":7},{\"Student\":4,\"Cycle\":5,\"Subject\":\"Physics\",\"Grade\":\"A*\"},{\"Student\":4,\"Cycle\":5,\"Subject\":\"Spanish\",\"Grade\":\"A\"},{\"Student\":5,\"Cycle\":5,\"Subject\":\"Biology\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":5,\"Subject\":\"Chemistry\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":5,\"Subject\":\"English\",\"Grade\":8},{\"Student\":5,\"Cycle\":5,\"Subject\":\"French\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":5,\"Subject\":\"History\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":5,\"Subject\":\"Latin\",\"Grade\":7},{\"Student\":5,\"Cycle\":5,\"Subject\":\"Maths\",\"Grade\":8},{\"Student\":5,\"Cycle\":5,\"Subject\":\"RS\",\"Grade\":\"-\"},{\"Student\":5,\"Cycle\":5,\"Subject\":\"Physics\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":5,\"Subject\":\"Spanish\",\"Grade\":\"A*\"},{\"Student\":1,\"Cycle\":4,\"Subject\":\"Biology\",\"Grade\":\"B\"},{\"Student\":1,\"Cycle\":4,\"Subject\":\"Chemistry\",\"Grade\":\"A*\"},{\"Student\":1,\"Cycle\":4,\"Subject\":\"Drama\",\"Grade\":7},{\"Student\":1,\"Cycle\":4,\"Subject\":\"English\",\"Grade\":7},{\"Student\":1,\"Cycle\":4,\"Subject\":\"Geography\",\"Grade\":6},{\"Student\":1,\"Cycle\":4,\"Subject\":\"Maths\",\"Grade\":6},{\"Student\":1,\"Cycle\":4,\"Subject\":\"PE\",\"Grade\":7},{\"Student\":1,\"Cycle\":4,\"Subject\":\"Photography\",\"Grade\":8},{\"Student\":1,\"Cycle\":4,\"Subject\":\"Physics\",\"Grade\":\"A*\"},{\"Student\":1,\"Cycle\":4,\"Subject\":\"Spanish\",\"Grade\":\"B\"},{\"Student\":2,\"Cycle\":4,\"Subject\":\"Biology\",\"Grade\":\"A*\"},{\"Student\":2,\"Cycle\":4,\"Subject\":\"Chemistry\",\"Grade\":\"A*\"},{\"Student\":2,\"Cycle\":4,\"Subject\":\"Computer Science\",\"Grade\":6},{\"Student\":2,\"Cycle\":4,\"Subject\":\"DT\",\"Grade\":\"A\"},{\"Student\":2,\"Cycle\":4,\"Subject\":\"English\",\"Grade\":6},{\"Student\":2,\"Cycle\":4,\"Subject\":\"History\",\"Grade\":\"B\"},{\"Student\":2,\"Cycle\":4,\"Subject\":\"Mandarin\",\"Grade\":\"A*\"},{\"Student\":2,\"Cycle\":4,\"Subject\":\"Maths\",\"Grade\":7},{\"Student\":2,\"Cycle\":4,\"Subject\":\"Physics\",\"Grade\":\"A*\"},{\"Student\":3,\"Cycle\":4,\"Subject\":\"Biology\",\"Grade\":\"A\"},{\"Student\":3,\"Cycle\":4,\"Subject\":\"Chemistry\",\"Grade\":\"A\"},{\"Student\":3,\"Cycle\":4,\"Subject\":\"Drama\",\"Grade\":7},{\"Student\":3,\"Cycle\":4,\"Subject\":\"English\",\"Grade\":8},{\"Student\":3,\"Cycle\":4,\"Subject\":\"History\",\"Grade\":\"A\"},{\"Student\":3,\"Cycle\":4,\"Subject\":\"Mandarin\",\"Grade\":6},{\"Student\":3,\"Cycle\":4,\"Subject\":\"Maths\",\"Grade\":7},{\"Student\":3,\"Cycle\":4,\"Subject\":\"PE\",\"Grade\":7},{\"Student\":3,\"Cycle\":4,\"Subject\":\"Physics\",\"Grade\":\"A*\"},{\"Student\":4,\"Cycle\":4,\"Subject\":\"Biology\",\"Grade\":\"A*\"},{\"Student\":4,\"Cycle\":4,\"Subject\":\"Chemistry\",\"Grade\":\"A\"},{\"Student\":4,\"Cycle\":4,\"Subject\":\"Drama\",\"Grade\":7},{\"Student\":4,\"Cycle\":4,\"Subject\":\"English\",\"Grade\":8},{\"Student\":4,\"Cycle\":4,\"Subject\":\"Geography\",\"Grade\":7},{\"Student\":4,\"Cycle\":4,\"Subject\":\"Latin\",\"Grade\":6},{\"Student\":4,\"Cycle\":4,\"Subject\":\"Maths\",\"Grade\":7},{\"Student\":4,\"Cycle\":4,\"Subject\":\"PE\",\"Grade\":6},{\"Student\":4,\"Cycle\":4,\"Subject\":\"Physics\",\"Grade\":\"A*\"},{\"Student\":4,\"Cycle\":4,\"Subject\":\"Spanish\",\"Grade\":\"A\"},{\"Student\":5,\"Cycle\":4,\"Subject\":\"Biology\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":4,\"Subject\":\"Chemistry\",\"Grade\":\"A\"},{\"Student\":5,\"Cycle\":4,\"Subject\":\"English\",\"Grade\":8},{\"Student\":5,\"Cycle\":4,\"Subject\":\"French\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":4,\"Subject\":\"History\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":4,\"Subject\":\"Latin\",\"Grade\":8},{\"Student\":5,\"Cycle\":4,\"Subject\":\"Maths\",\"Grade\":8},{\"Student\":5,\"Cycle\":4,\"Subject\":\"RS\",\"Grade\":\"A\"},{\"Student\":5,\"Cycle\":4,\"Subject\":\"Physics\",\"Grade\":\"A\"},{\"Student\":5,\"Cycle\":4,\"Subject\":\"Spanish\",\"Grade\":\"A*\"},{\"Student\":1,\"Cycle\":3,\"Subject\":\"Biology\",\"Grade\":\"B\"},{\"Student\":1,\"Cycle\":3,\"Subject\":\"Chemistry\",\"Grade\":\"A*\"},{\"Student\":1,\"Cycle\":3,\"Subject\":\"Drama\",\"Grade\":6},{\"Student\":1,\"Cycle\":3,\"Subject\":\"English\",\"Grade\":7},{\"Student\":1,\"Cycle\":3,\"Subject\":\"Geography\",\"Grade\":6},{\"Student\":1,\"Cycle\":3,\"Subject\":\"Maths\",\"Grade\":5},{\"Student\":1,\"Cycle\":3,\"Subject\":\"PE\",\"Grade\":7},{\"Student\":1,\"Cycle\":3,\"Subject\":\"Photography\",\"Grade\":8},{\"Student\":1,\"Cycle\":3,\"Subject\":\"Physics\",\"Grade\":\"A\"},{\"Student\":1,\"Cycle\":3,\"Subject\":\"Spanish\",\"Grade\":\"B\"},{\"Student\":2,\"Cycle\":3,\"Subject\":\"Biology\",\"Grade\":\"A*\"},{\"Student\":2,\"Cycle\":3,\"Subject\":\"Chemistry\",\"Grade\":\"A\"},{\"Student\":2,\"Cycle\":3,\"Subject\":\"Computer Science\",\"Grade\":7},{\"Student\":2,\"Cycle\":3,\"Subject\":\"DT\",\"Grade\":\"A\"},{\"Student\":2,\"Cycle\":3,\"Subject\":\"English\",\"Grade\":6},{\"Student\":2,\"Cycle\":3,\"Subject\":\"Geography\",\"Grade\":5},{\"Student\":2,\"Cycle\":3,\"Subject\":\"History\",\"Grade\":\"A\"},{\"Student\":2,\"Cycle\":3,\"Subject\":\"Mandarin\",\"Grade\":\"A\"},{\"Student\":2,\"Cycle\":3,\"Subject\":\"Maths\",\"Grade\":8},{\"Student\":2,\"Cycle\":3,\"Subject\":\"Physics\",\"Grade\":\"A*\"},{\"Student\":3,\"Cycle\":3,\"Subject\":\"Biology\",\"Grade\":\"B\"},{\"Student\":3,\"Cycle\":3,\"Subject\":\"Chemistry\",\"Grade\":\"A\"},{\"Student\":3,\"Cycle\":3,\"Subject\":\"Drama\",\"Grade\":7},{\"Student\":3,\"Cycle\":3,\"Subject\":\"English\",\"Grade\":8},{\"Student\":3,\"Cycle\":3,\"Subject\":\"History\",\"Grade\":\"A*\"},{\"Student\":3,\"Cycle\":3,\"Subject\":\"Mandarin\",\"Grade\":6},{\"Student\":3,\"Cycle\":3,\"Subject\":\"Maths\",\"Grade\":7},{\"Student\":3,\"Cycle\":3,\"Subject\":\"PE\",\"Grade\":7},{\"Student\":3,\"Cycle\":3,\"Subject\":\"Physics\",\"Grade\":\"A\"},{\"Student\":4,\"Cycle\":3,\"Subject\":\"Biology\",\"Grade\":\"A*\"},{\"Student\":4,\"Cycle\":3,\"Subject\":\"Chemistry\",\"Grade\":\"A\"},{\"Student\":4,\"Cycle\":3,\"Subject\":\"Drama\",\"Grade\":7},{\"Student\":4,\"Cycle\":3,\"Subject\":\"English\",\"Grade\":8},{\"Student\":4,\"Cycle\":3,\"Subject\":\"Geography\",\"Grade\":7},{\"Student\":4,\"Cycle\":3,\"Subject\":\"Latin\",\"Grade\":6},{\"Student\":4,\"Cycle\":3,\"Subject\":\"Maths\",\"Grade\":7},{\"Student\":4,\"Cycle\":3,\"Subject\":\"PE\",\"Grade\":6},{\"Student\":4,\"Cycle\":3,\"Subject\":\"Physics\",\"Grade\":\"A\"},{\"Student\":4,\"Cycle\":3,\"Subject\":\"Spanish\",\"Grade\":\"A\"},{\"Student\":5,\"Cycle\":3,\"Subject\":\"Biology\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":3,\"Subject\":\"Chemistry\",\"Grade\":\"A\"},{\"Student\":5,\"Cycle\":3,\"Subject\":\"English\",\"Grade\":8},{\"Student\":5,\"Cycle\":3,\"Subject\":\"French\",\"Grade\":\"A\"},{\"Student\":5,\"Cycle\":3,\"Subject\":\"History\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":3,\"Subject\":\"Latin\",\"Grade\":6},{\"Student\":5,\"Cycle\":3,\"Subject\":\"Maths\",\"Grade\":8},{\"Student\":5,\"Cycle\":3,\"Subject\":\"RS\",\"Grade\":\"A\"},{\"Student\":5,\"Cycle\":3,\"Subject\":\"Physics\",\"Grade\":\"A\"},{\"Student\":5,\"Cycle\":3,\"Subject\":\"Spanish\",\"Grade\":\"A*\"},{\"Student\":1,\"Cycle\":2,\"Subject\":\"Biology\",\"Grade\":\"B\"},{\"Student\":1,\"Cycle\":2,\"Subject\":\"Chemistry\",\"Grade\":\"A*\"},{\"Student\":1,\"Cycle\":2,\"Subject\":\"Drama\",\"Grade\":8},{\"Student\":1,\"Cycle\":2,\"Subject\":\"English\",\"Grade\":7},{\"Student\":1,\"Cycle\":2,\"Subject\":\"Geography\",\"Grade\":6},{\"Student\":1,\"Cycle\":2,\"Subject\":\"Maths\",\"Grade\":6},{\"Student\":1,\"Cycle\":2,\"Subject\":\"PE\",\"Grade\":8},{\"Student\":1,\"Cycle\":2,\"Subject\":\"Photography\",\"Grade\":8},{\"Student\":1,\"Cycle\":2,\"Subject\":\"Physics\",\"Grade\":\"A*\"},{\"Student\":1,\"Cycle\":2,\"Subject\":\"Spanish\",\"Grade\":\"B\"},{\"Student\":2,\"Cycle\":2,\"Subject\":\"Biology\",\"Grade\":\"A*\"},{\"Student\":2,\"Cycle\":2,\"Subject\":\"Chemistry\",\"Grade\":\"A*\"},{\"Student\":2,\"Cycle\":2,\"Subject\":\"Computer Science\",\"Grade\":6},{\"Student\":2,\"Cycle\":2,\"Subject\":\"DT\",\"Grade\":\"A\"},{\"Student\":2,\"Cycle\":2,\"Subject\":\"English\",\"Grade\":7},{\"Student\":2,\"Cycle\":2,\"Subject\":\"Geography\",\"Grade\":6},{\"Student\":2,\"Cycle\":2,\"Subject\":\"History\",\"Grade\":\"B\"},{\"Student\":2,\"Cycle\":2,\"Subject\":\"Mandarin\",\"Grade\":\"A\"},{\"Student\":2,\"Cycle\":2,\"Subject\":\"Maths\",\"Grade\":8},{\"Student\":2,\"Cycle\":2,\"Subject\":\"Physics\",\"Grade\":\"A*\"},{\"Student\":3,\"Cycle\":2,\"Subject\":\"Biology\",\"Grade\":\"A\"},{\"Student\":3,\"Cycle\":2,\"Subject\":\"Chemistry\",\"Grade\":\"A\"},{\"Student\":3,\"Cycle\":2,\"Subject\":\"Drama\",\"Grade\":5},{\"Student\":3,\"Cycle\":2,\"Subject\":\"English\",\"Grade\":8},{\"Student\":3,\"Cycle\":2,\"Subject\":\"History\",\"Grade\":\"A\"},{\"Student\":3,\"Cycle\":2,\"Subject\":\"Mandarin\",\"Grade\":6},{\"Student\":3,\"Cycle\":2,\"Subject\":\"Maths\",\"Grade\":7},{\"Student\":3,\"Cycle\":2,\"Subject\":\"PE\",\"Grade\":6},{\"Student\":3,\"Cycle\":2,\"Subject\":\"Physics\",\"Grade\":\"A\"},{\"Student\":4,\"Cycle\":2,\"Subject\":\"Biology\",\"Grade\":\"A*\"},{\"Student\":4,\"Cycle\":2,\"Subject\":\"Chemistry\",\"Grade\":\"A\"},{\"Student\":4,\"Cycle\":2,\"Subject\":\"Drama\",\"Grade\":6},{\"Student\":4,\"Cycle\":2,\"Subject\":\"English\",\"Grade\":8},{\"Student\":4,\"Cycle\":2,\"Subject\":\"Geography\",\"Grade\":7},{\"Student\":4,\"Cycle\":2,\"Subject\":\"Latin\",\"Grade\":6},{\"Student\":4,\"Cycle\":2,\"Subject\":\"Maths\",\"Grade\":7},{\"Student\":4,\"Cycle\":2,\"Subject\":\"PE\",\"Grade\":7},{\"Student\":4,\"Cycle\":2,\"Subject\":\"Physics\",\"Grade\":\"A*\"},{\"Student\":4,\"Cycle\":2,\"Subject\":\"Spanish\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":2,\"Subject\":\"Biology\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":2,\"Subject\":\"Chemistry\",\"Grade\":\"A\"},{\"Student\":5,\"Cycle\":2,\"Subject\":\"English\",\"Grade\":8},{\"Student\":5,\"Cycle\":2,\"Subject\":\"French\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":2,\"Subject\":\"History\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":2,\"Subject\":\"Latin\",\"Grade\":6},{\"Student\":5,\"Cycle\":2,\"Subject\":\"Maths\",\"Grade\":8},{\"Student\":5,\"Cycle\":2,\"Subject\":\"RS\",\"Grade\":\"A\"},{\"Student\":5,\"Cycle\":2,\"Subject\":\"Physics\",\"Grade\":\"A\"},{\"Student\":5,\"Cycle\":2,\"Subject\":\"Spanish\",\"Grade\":\"A*\"},{\"Student\":1,\"Cycle\":1,\"Subject\":\"Biology\",\"Grade\":\"B\"},{\"Student\":1,\"Cycle\":1,\"Subject\":\"Chemistry\",\"Grade\":\"A*\"},{\"Student\":1,\"Cycle\":1,\"Subject\":\"Drama\",\"Grade\":7},{\"Student\":1,\"Cycle\":1,\"Subject\":\"English\",\"Grade\":7},{\"Student\":1,\"Cycle\":1,\"Subject\":\"Geography\",\"Grade\":7},{\"Student\":1,\"Cycle\":1,\"Subject\":\"Maths\",\"Grade\":6},{\"Student\":1,\"Cycle\":1,\"Subject\":\"PE\",\"Grade\":7},{\"Student\":1,\"Cycle\":1,\"Subject\":\"Photography\",\"Grade\":7},{\"Student\":1,\"Cycle\":1,\"Subject\":\"Physics\",\"Grade\":\"A*\"},{\"Student\":1,\"Cycle\":1,\"Subject\":\"Spanish\",\"Grade\":\"B\"},{\"Student\":2,\"Cycle\":1,\"Subject\":\"Biology\",\"Grade\":\"A\"},{\"Student\":2,\"Cycle\":1,\"Subject\":\"Chemistry\",\"Grade\":\"A*\"},{\"Student\":2,\"Cycle\":1,\"Subject\":\"Computer Science\",\"Grade\":6},{\"Student\":2,\"Cycle\":1,\"Subject\":\"DT\",\"Grade\":\"B\"},{\"Student\":2,\"Cycle\":1,\"Subject\":\"English\",\"Grade\":6},{\"Student\":2,\"Cycle\":1,\"Subject\":\"Geography\",\"Grade\":7},{\"Student\":2,\"Cycle\":1,\"Subject\":\"History\",\"Grade\":\"B\"},{\"Student\":2,\"Cycle\":1,\"Subject\":\"Mandarin\",\"Grade\":\"A*\"},{\"Student\":2,\"Cycle\":1,\"Subject\":\"Maths\",\"Grade\":7},{\"Student\":2,\"Cycle\":1,\"Subject\":\"Physics\",\"Grade\":\"A*\"},{\"Student\":3,\"Cycle\":1,\"Subject\":\"Biology\",\"Grade\":\"A\"},{\"Student\":3,\"Cycle\":1,\"Subject\":\"Chemistry\",\"Grade\":\"A\"},{\"Student\":3,\"Cycle\":1,\"Subject\":\"Drama\",\"Grade\":8},{\"Student\":3,\"Cycle\":1,\"Subject\":\"English\",\"Grade\":7},{\"Student\":3,\"Cycle\":1,\"Subject\":\"History\",\"Grade\":\"A\"},{\"Student\":3,\"Cycle\":1,\"Subject\":\"Mandarin\",\"Grade\":6},{\"Student\":3,\"Cycle\":1,\"Subject\":\"Maths\",\"Grade\":7},{\"Student\":3,\"Cycle\":1,\"Subject\":\"PE\",\"Grade\":6},{\"Student\":3,\"Cycle\":1,\"Subject\":\"Physics\",\"Grade\":\"A\"},{\"Student\":4,\"Cycle\":1,\"Subject\":\"Biology\",\"Grade\":\"A*\"},{\"Student\":4,\"Cycle\":1,\"Subject\":\"Chemistry\",\"Grade\":\"A\"},{\"Student\":4,\"Cycle\":1,\"Subject\":\"Drama\",\"Grade\":8},{\"Student\":4,\"Cycle\":1,\"Subject\":\"English\",\"Grade\":8},{\"Student\":4,\"Cycle\":1,\"Subject\":\"Geography\",\"Grade\":6},{\"Student\":4,\"Cycle\":1,\"Subject\":\"Latin\",\"Grade\":6},{\"Student\":4,\"Cycle\":1,\"Subject\":\"Maths\",\"Grade\":7},{\"Student\":4,\"Cycle\":1,\"Subject\":\"PE\",\"Grade\":7},{\"Student\":4,\"Cycle\":1,\"Subject\":\"Physics\",\"Grade\":\"A*\"},{\"Student\":4,\"Cycle\":1,\"Subject\":\"Spanish\",\"Grade\":\"A\"},{\"Student\":5,\"Cycle\":1,\"Subject\":\"Biology\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":1,\"Subject\":\"Chemistry\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":1,\"Subject\":\"English\",\"Grade\":7},{\"Student\":5,\"Cycle\":1,\"Subject\":\"French\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":1,\"Subject\":\"History\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":1,\"Subject\":\"Latin\",\"Grade\":7},{\"Student\":5,\"Cycle\":1,\"Subject\":\"Maths\",\"Grade\":8},{\"Student\":5,\"Cycle\":1,\"Subject\":\"RS\",\"Grade\":\"B\"},{\"Student\":5,\"Cycle\":1,\"Subject\":\"Physics\",\"Grade\":\"A*\"},{\"Student\":5,\"Cycle\":1,\"Subject\":\"Spanish\",\"Grade\":\"A*\"}]";

var cycles = "[{\"ID\":1,\"Name\":\"Mich 1\",\"Date\":\"20-Oct-17\"},{\"ID\":2,\"Name\":\"Mich 2\",\"Date\":\"01-Dec-17\"},{\"ID\":3,\"Name\":\"Lent 1\",\"Date\":\"20-Feb-18\"},{\"ID\":4,\"Name\":\"Lent 2\",\"Date\":\"01-Apr-18\"},{\"ID\":5,\"Name\":\"Summer 1\",\"Date\":\"01-May-18\"}]";

var baselines = "[{\"ID\":1,\"Name\":\"Jonah\",\"Surname\":\"Bates\",\"Subject\":\"Biology\",\"Baseline\":\"-\"},{\"ID\":1,\"Name\":\"Jonah\",\"Surname\":\"Bates\",\"Subject\":\"Chemistry\",\"Baseline\":6.7},{\"ID\":1,\"Name\":\"Jonah\",\"Surname\":\"Bates\",\"Subject\":\"Drama\",\"Baseline\":6.4},{\"ID\":1,\"Name\":\"Jonah\",\"Surname\":\"Bates\",\"Subject\":\"English\",\"Baseline\":6.3},{\"ID\":1,\"Name\":\"Jonah\",\"Surname\":\"Bates\",\"Subject\":\"Geography\",\"Baseline\":6.4},{\"ID\":1,\"Name\":\"Jonah\",\"Surname\":\"Bates\",\"Subject\":\"Maths\",\"Baseline\":6.6},{\"ID\":1,\"Name\":\"Jonah\",\"Surname\":\"Bates\",\"Subject\":\"PE\",\"Baseline\":6.2},{\"ID\":1,\"Name\":\"Jonah\",\"Surname\":\"Bates\",\"Subject\":\"Photography\",\"Baseline\":6.4},{\"ID\":1,\"Name\":\"Jonah\",\"Surname\":\"Bates\",\"Subject\":\"Physics\",\"Baseline\":6.7},{\"ID\":1,\"Name\":\"Jonah\",\"Surname\":\"Bates\",\"Subject\":\"Spanish\",\"Baseline\":6.3},{\"ID\":2,\"Name\":\"Lucian\",\"Surname\":\"Bennett\",\"Subject\":\"Biology\",\"Baseline\":7.5},{\"ID\":2,\"Name\":\"Lucian\",\"Surname\":\"Bennett\",\"Subject\":\"Chemistry\",\"Baseline\":7.5},{\"ID\":2,\"Name\":\"Lucian\",\"Surname\":\"Bennett\",\"Subject\":\"Computer Science\",\"Baseline\":6.9},{\"ID\":2,\"Name\":\"Lucian\",\"Surname\":\"Bennett\",\"Subject\":\"DT\",\"Baseline\":7.4},{\"ID\":2,\"Name\":\"Lucian\",\"Surname\":\"Bennett\",\"Subject\":\"English\",\"Baseline\":7.5},{\"ID\":2,\"Name\":\"Lucian\",\"Surname\":\"Bennett\",\"Subject\":\"History\",\"Baseline\":7.7},{\"ID\":2,\"Name\":\"Lucian\",\"Surname\":\"Bennett\",\"Subject\":\"Mandarin\",\"Baseline\":7.07},{\"ID\":2,\"Name\":\"Lucian\",\"Surname\":\"Bennett\",\"Subject\":\"Maths\",\"Baseline\":8},{\"ID\":2,\"Name\":\"Lucian\",\"Surname\":\"Bennett\",\"Subject\":\"Physics\",\"Baseline\":7.6},{\"ID\":3,\"Name\":\"Oscar\",\"Surname\":\"Heal\",\"Subject\":\"Biology\",\"Baseline\":7},{\"ID\":3,\"Name\":\"Oscar\",\"Surname\":\"Heal\",\"Subject\":\"Chemistry\",\"Baseline\":6.9},{\"ID\":3,\"Name\":\"Oscar\",\"Surname\":\"Heal\",\"Subject\":\"Drama\",\"Baseline\":6.7},{\"ID\":3,\"Name\":\"Oscar\",\"Surname\":\"Heal\",\"Subject\":\"English\",\"Baseline\":6.6},{\"ID\":3,\"Name\":\"Oscar\",\"Surname\":\"Heal\",\"Subject\":\"History\",\"Baseline\":6.8},{\"ID\":3,\"Name\":\"Oscar\",\"Surname\":\"Heal\",\"Subject\":\"Mandarin\",\"Baseline\":6.47},{\"ID\":3,\"Name\":\"Oscar\",\"Surname\":\"Heal\",\"Subject\":\"Maths\",\"Baseline\":7},{\"ID\":3,\"Name\":\"Oscar\",\"Surname\":\"Heal\",\"Subject\":\"PE\",\"Baseline\":6.5},{\"ID\":3,\"Name\":\"Oscar\",\"Surname\":\"Heal\",\"Subject\":\"Physics\",\"Baseline\":7},{\"ID\":4,\"Name\":\"Raghuv\",\"Surname\":\"Kanwar\",\"Subject\":\"Biology\",\"Baseline\":7},{\"ID\":4,\"Name\":\"Raghuv\",\"Surname\":\"Kanwar\",\"Subject\":\"Chemistry\",\"Baseline\":7},{\"ID\":4,\"Name\":\"Raghuv\",\"Surname\":\"Kanwar\",\"Subject\":\"Drama\",\"Baseline\":6.7},{\"ID\":4,\"Name\":\"Raghuv\",\"Surname\":\"Kanwar\",\"Subject\":\"English\",\"Baseline\":6.7},{\"ID\":4,\"Name\":\"Raghuv\",\"Surname\":\"Kanwar\",\"Subject\":\"Geography\",\"Baseline\":6.8},{\"ID\":4,\"Name\":\"Raghuv\",\"Surname\":\"Kanwar\",\"Subject\":\"Latin\",\"Baseline\":6.67},{\"ID\":4,\"Name\":\"Raghuv\",\"Surname\":\"Kanwar\",\"Subject\":\"Maths\",\"Baseline\":7.1},{\"ID\":4,\"Name\":\"Raghuv\",\"Surname\":\"Kanwar\",\"Subject\":\"PE\",\"Baseline\":6.5},{\"ID\":4,\"Name\":\"Raghuv\",\"Surname\":\"Kanwar\",\"Subject\":\"Physics\",\"Baseline\":7},{\"ID\":4,\"Name\":\"Raghuv\",\"Surname\":\"Kanwar\",\"Subject\":\"Spanish\",\"Baseline\":6.7},{\"ID\":5,\"Name\":\"Zayn\",\"Surname\":\"Rajan\",\"Subject\":\"Biology\",\"Baseline\":7.1},{\"ID\":5,\"Name\":\"Zayn\",\"Surname\":\"Rajan\",\"Subject\":\"Chemistry\",\"Baseline\":7.1},{\"ID\":5,\"Name\":\"Zayn\",\"Surname\":\"Rajan\",\"Subject\":\"English\",\"Baseline\":6.9},{\"ID\":5,\"Name\":\"Zayn\",\"Surname\":\"Rajan\",\"Subject\":\"French\",\"Baseline\":6.8},{\"ID\":5,\"Name\":\"Zayn\",\"Surname\":\"Rajan\",\"Subject\":\"History\",\"Baseline\":7},{\"ID\":5,\"Name\":\"Zayn\",\"Surname\":\"Rajan\",\"Subject\":\"Latin\",\"Baseline\":6.77},{\"ID\":5,\"Name\":\"Zayn\",\"Surname\":\"Rajan\",\"Subject\":\"Maths\",\"Baseline\":7.3},{\"ID\":5,\"Name\":\"Zayn\",\"Surname\":\"Rajan\",\"Subject\":\"RS\",\"Baseline\":7.1},{\"ID\":5,\"Name\":\"Zayn\",\"Surname\":\"Rajan\",\"Subject\":\"Physics\",\"Baseline\":6.9},{\"ID\":5,\"Name\":\"Zayn\",\"Surname\":\"Rajan\",\"Subject\":\"Spanish\",\"Baseline\":6.9}]";

/* Globals */
var active_cycle;
var students;

$(document).ready(function(){
    baselines = JSON.parse(baselines);
    cycles = JSON.parse(cycles);
    reports = JSON.parse(reports);
    students = getStudentsWithAvgBaselines(baselines);
    var sorted_cycles = orderArrayByDate(cycles, "Date", "DD-MMM-YY", false);
    writeCycleButtons(sorted_cycles);
    writeStudentAverageTable(students, active_cycle);
});

function writeCycleButtons(sorted_cycles) {
    var html_text = "";
    active_cycle = sorted_cycles[sorted_cycles.length - 1]["ID"];
    for (var i = 0; i < sorted_cycles.length; i++) {
        var title = sorted_cycles[i]["Name"];
        var id = sorted_cycles[i]["ID"];
        var class_text = "primary_section_button";
        if (id === active_cycle) class_text += " active";
        if (i === sorted_cycles.length - 1) class_text += " last";
        html_text += "<div class='" + class_text + "' id='cycle_button_" + id + "' onclick='clickCycleButton(" + id + ")'><h4>" + title + "</h4></div>";
    }
    $("#cycle_buttons").html(html_text);
}

function writeStudentAverageTable(students, cycle) {
    /* Order by surname */
    students = orderArrayBy(students, "Surname", false);
    /* Header row */
    var html_text = "<div class='header_row row'><div class='fill_col col left'><h3>Student</h3></div>";
    html_text += "<div class='fixed_col col'><h3>Baseline</h3></div><div class='fixed_col col'><h3>Grade</h3></div>";
    html_text += "<div class='fixed_col col'><h3>VA</h3></div></div>";
    for (var i = 0; i < students.length; i++) {
        var id = students[i]["ID"];
        var name = students[i]["Name"] + " " + students[i]["Surname"];
        var baseline = students[i]["Baseline"];
        var result = getStudentAvgForCycle(reports, id, cycle, baselines);
        baseline = precisionRound(baseline, 1);
        grade = result[0] !== "-" ? precisionRound(result[0], 1) : "-";
        var va = "-";
        var col_text = "var(--dark-grey)";
        if (result[1] !== "-") {
            va = precisionRound(result[1], 1);
            var colour = getColourForValue(va, 1.0, 0.1, -0.6, [60, 250, 0], [247, 153, 2], [210, 0, 0]);
            col_text = "rgb(" + colour[0] + ", " + colour[1] + ", " + colour[2] + ")";
        }
        /* Student Row */
        html_text += "<div class='content_row row ";
        html_text += i % 2 === 0 ? "even" : "odd";
        html_text += "'><div class='fill_col col left'><h4>" + name + "</h4></div>";
        html_text += "<div class='fixed_col col'><h3>" + baseline + "</h3></div><div class='fixed_col col'><h3>" + grade + "</h3></div>";
        html_text += "<div class='fixed_col col' style='color:" + col_text + "'><h3>" + va + "</h3></div></div>";
    }
    $("#student_average_table").html(html_text);
}

function updateActiveCycleButton() {
    var div = document.getElementById("cycle_buttons");
    var buttons = div.children;
    for (var i = 0; i < buttons.length; i++) {
        var id = buttons[i].id;
        $("#" + id).removeClass("active");
        if (id === "cycle_button_" + active_cycle) {
            $("#" + id).addClass("active");
        }
    }
}

function clickCycleButton(cycle) {
    if (cycle !== active_cycle) {
        active_cycle = cycle;
        writeStudentAverageTable(students, cycle);
        updateActiveCycleButton();
    }
}
